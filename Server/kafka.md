# Kafka

## 1.1 Kafka란?

- 고성능 분산형 이벤트 스트리밍 플랫폼
- 

## 1.2 Kafka의 특징
- 분산 처리 시스템 --> 고성능, 고가용성, 확장성 --> 노드 장애 대응성 높음
- 프로듀서와 컨슈머의 분리 --> Producer 중심적
- 메시지를 디스크에 저장 --> 메시징 시스템과 같이 영구 메시지 데이터를 여러 컨슈머에게 허용
- 높은 처리량을 위한 메시지 최적화
- 데이터가 증가함에 따라 스케일아웃이 가능한 시스템 (** 스케일아웃: 장비추가 확장방식)
- 멀티 프로듀서, 멀티 컨슈머
- 잔여 메모리가 아닌 페이지 캐시를 통해 Read/Write를 하므로 처리속도가 매우 빠름
- 메시지를 작은 단위로 묶어 배치 처리를 함으로써 속도 향상에 큰 도움을 줌

## 1.3 기본구조
*카프카 클러스터
- 메시지를 저장하는 ```저장소```
- 여러 개의 브로커(= 각각의 서버)로 구성
- 브로커들이 메시지를 나눠서 저장, 이중화 처리, 장애가 나면 대체
- 데이터를 이동하는 데 필요한 핵심 역할

* 주키퍼(Zookeeper)
- 분산 애플리케이션 관리를 위한 코디네이션 시스템
- 분산된 노드의 정보를 중앙에 집중하고 구성관리, 그룹 네이밍, 동기화 등의 서비스 수행

* 주키퍼 클러스터(앙상블)


## 2.1 핵심 용어들
* 메시징 시스템
- Publisher와 Subscriber로 이루어진 비동기 메시징 전송 방식
- Message : 데이터 단위
- Producer(=Publisher) : 메시지를 보내는 측 --> 메시지 시스템에 메시지 저장
- Consumer(=Subscriber) : 데이터를 수신하는 측
- 발신자의 메시지에는 수신자가 정해져있지 않은 상태로 발행
- 구독을 신청한 수신자만이 정해진 메시지를 수신
- 수신자는 발신자 정보가 없어도 메시지 수신이 가능


* 토픽과 파티션
- Topic : 메시지를 구분하는 단위. 파일 시스템의 폴더와 유사
- Partition : 토픽을 구성하는 데이터 저장소
- 한 개의 토픽은 한 개 이상의 파티션으로 구성
- 각각의 메시지를 알맞게 구분하기 위한 목적으로 사용
- 프로듀서와 컨슈머가 토픽을 기준으로 메시지를 주고받음

* 오프셋과 메시지순서
- offset : 파티션마다 메시지가 저장되는 위치
- 파티션 내에서 시퀀셜하게 증가하는 숫자 형태 / 동일 파티션 내 메시지의 순서 보장
- 컨슈머는 메시지를 가져올 때마다 오프셋 정보를 커밋(commit) --> 현재 위치정보 저장


